<div class="category-management">
    <div class="page-header">
        <h1>Category Management</h1>
        <button mat-raised-button color="primary" (click)="showAddForm()" *ngIf="!showForm">
            <mat-icon>add</mat-icon>
            Add Category
        </button>
    </div>

    <mat-card *ngIf="showForm" class="form-card">
        <h2>{{ editingCategory ? 'Edit Category' : 'Add Category' }}</h2>
        <form [formGroup]="categoryForm" (ngSubmit)="saveCategory()">
            <mat-form-field appearance="outline">
                <mat-label>Name</mat-label>
                <input matInput formControlName="name" />
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Description</mat-label>
                <textarea matInput formControlName="description" rows="3"></textarea>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Image URL</mat-label>
                <input matInput formControlName="image" />
            </mat-form-field>

            <div class="form-actions">
                <button mat-raised-button color="primary" type="submit" [disabled]="categoryForm.invalid">
                    <mat-icon>save</mat-icon>
                    Save
                </button>
                <button mat-stroked-button type="button" (click)="cancelEdit()">Cancel</button>
            </div>
        </form>
    </mat-card>

    <div class="categories-grid" *ngIf="!showForm">
        <mat-card *ngFor="let category of categories" class="category-card">
            <img [src]="category.image" [alt]="category.name" />
            <div class="card-content">
                <h3>{{ category.name }}</h3>
                <p>{{ category.description }}</p>
                <div class="card-actions">
                    <button mat-icon-button color="primary" (click)="editCategory(category)">
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button color="warn" (click)="deleteCategory(category)">
                        <mat-icon>delete</mat-icon>
                    </button>
                </div>
            </div>
        </mat-card>
    </div>
</div>