<div class="product-detail-page container" *ngIf="!loading && product">
  <div class="main-grid">
    <div class="gallery">
      <img class="main-image" [src]="selectedImage" [alt]="product.name" (error)="onImageError($event)">
      <div class="thumbs">
        <img [src]="product.image" [alt]="product.name" (click)="selectedImage = product.image" (error)="onImageError($event)">
        <img [src]="product.image" [alt]="product.name" (click)="selectedImage = product.image" (error)="onImageError($event)">
        <img [src]="product.image" [alt]="product.name" (click)="selectedImage = product.image" (error)="onImageError($event)">
      </div>
    </div>

    <div class="details">
      <h1>{{ product.name }}</h1>
      <p class="price">{{ product.price | currency:'INR':'symbol':'1.0-0' }} <span *ngIf="product.unit">/ {{ product.unit }}</span></p>
      <p class="desc">{{ product.description }}</p>

      <div class="delivery"><mat-icon>local_shipping</mat-icon> Delivery in 30â€“45 mins</div>

      <div class="quantity-row">
        <button mat-icon-button (click)="decreaseQuantity()"><mat-icon>remove</mat-icon></button>
        <span>{{ quantity }}</span>
        <button mat-icon-button (click)="increaseQuantity()"><mat-icon>add</mat-icon></button>
      </div>
      <button mat-raised-button color="primary" (click)="onAddToCart()" [disabled]="!product.inStock">Add to cart</button>

      <div class="info-panels">
        <div><h4>Pack Information</h4><p>Stored and packed hygienically. Best consumed fresh.</p></div>
        <div><h4>Nutritional Highlights</h4><p>Natural produce with quality checks from source to delivery.</p></div>
      </div>
    </div>
  </div>

  <section class="related">
    <h2>Related Products</h2>
    <div class="related-grid">
      <app-product-card *ngFor="let item of relatedProducts" [product]="item" (addToCart)="onAddRelatedToCart($event)"></app-product-card>
    </div>
  </section>
</div>
<div *ngIf="loading" class="loading-container"><mat-spinner></mat-spinner></div>
